// Heikin-Ashi Volume (example) - Pine v5
// Example implementation for EA integration (divider, MA line, volume confirmation)
// Not the original author; created as an open example to match README behavior

//@version=5
indicator("Heikin-Ashi Volume (example)", shorttitle="HA Volume", overlay=false)

// Inputs
divider = input.int(4, "Divider", minval=1)
ma_len  = input.int(20, "MA length", minval=1)
ma_type = input.string("SMA", "MA type", options=["SMA","EMA"])

// Scaled volume (divider)
vol_scaled = volume / divider

// MA on volume
vol_ma = ma_type == "EMA" ? ta.ema(vol_scaled, ma_len) : ta.sma(vol_scaled, ma_len)

// Color bars by price direction (use real candles)
bar_up = close >= open
vol_color = bar_up ? color.green : color.red

// Plot histogram and MA line
plot(vol_scaled, style=plot.style_columns, color=vol_color, title="HA Volume")
plot(vol_ma, color=color.white, title="Volume MA", linewidth=2)

// Confirmation boolean: last volume bar closed >= MA
confirm = vol_scaled >= vol_ma
plotshape(confirm and barstate.islast, title="VolumeConfirm", location=location.top, style=shape.circle, size=size.tiny, color=color.lime, text="VOLâœ“")

// Alert condition for EA/alerts
alertcondition(confirm and ta.change(confirm), title="Volume Confirmed", message="Volume bar closed at/above MA")

// End of file